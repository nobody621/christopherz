<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChristopherZ - Luxury Furniture</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">Christopher<span>Z</span></a>
                       <nav id="main-nav">
                        <ul>
                            <li><a href="#" class="active">Home</a></li>
                            <li><a href="collections.html">Collection</a></li>
                            <li><a href="shop.html">Shop</a></li>
                            <li><a href="About.html">About</a></li>
                            <li><a href="contactus.html">Contact</a></li>
                        </ul>
                    </nav>
            <div class="header-right">
                <a href="#" class="icon-btn"><i class="fas fa-search"></i></a>
                <a href="#" class="icon-btn cart-icon-link"><i class="fas fa-shopping-cart"></i></a>
                <a href="#" class="menu-btn"><i class="fas fa-bars"></i></a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h5 class="animated fadeInUp">Handcrafted Excellence</h5>
            <h1 class="animated fadeInUp delay-1">Timeless Luxury<br>For Modern Living</h1>
            <p class="animated fadeInUp delay-2">Where artisan craftsmanship meets contemporary design.<br>Creating spaces that tell your story.</p>
            <div class="hero-buttons animated fadeInUp delay-3">
                <a href="#" class="btn-primary">Explore Collection</a>
                <a href="#" class="btn-secondary">Book Consultation</a>
            </div>
        </div>
        <div class="hero-image animated fadeIn">
            <img src="living-room-furniture-display-with-space-for-text-and-wooden-wall-background-background-image-ai-generated-photo.jpg" alt="ChristopherZ Premium Furniture">
        </div>
        <div class="hero-scroll animated fadeInUp delay-4">
            <span>Scroll</span>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div class="hero-social">
            <a href="#" class="animated fadeInLeft delay-1"><i class="fab fa-instagram"></i></a>
            <a href="#" class="animated fadeInLeft delay-2"><i class="fab fa-tiktok"></i></a>
            <a href="#" class="animated fadeInLeft delay-3"><i class="fab fa-facebook"></i></a>
        </div>
        <div class="hero-features">
            <div class="feature animated fadeInRight delay-1">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <div class="feature-text">
                    <h4>Award Winning</h4>
                    <p>Design Excellence</p>
                </div>
            </div>
            <div class="feature animated fadeInRight delay-2">
                <div class="feature-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="feature-text">
                    <h4>Sustainable</h4>
                    <p>Eco-friendly Materials</p>
                </div>
            </div>
            <div class="feature animated fadeInRight delay-3">
                <div class="feature-icon">
                    <i class="fas fa-truck"></i>
                </div>
                <div class="feature-text">
                    <h4>White Glove</h4>
                    <p>Premium Delivery</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Category Slider Section -->
    <section class="category-slider-section">
        <h2 class="section-title animated fadeInUp">Explore Our Collections</h2>
        <div class="category-slider-container animated fadeInUp delay-1">
            <div class="category-slider">
                <div class="category-slide">
                    <div class="category-image-wrapper">
                        <img src="living room.jpeg" alt="Elegant Living Room Furniture Collection">
                         <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Living Room</h3>
                        <a href="living-room-collection.html" class="btn-slide-explore">Explore More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                <div class="category-slide">
                     <div class="category-image-wrapper">
                        <img src="bed room.jpeg" alt="Luxury Bedroom Furniture Sets">
                         <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Bedroom</h3>
                        <a href="bedroom-collection.html" class="btn-slide-explore">Explore More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                <div class="category-slide">
                     <div class="category-image-wrapper">
                        <img src="dining room.jpg" alt="Modern Dining Room Tables and Chairs">
                         <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Dining</h3>
                        <a href="dining-collection.html" class="btn-slide-explore">Explore More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                <div class="category-slide">
                     <div class="category-image-wrapper">
                        <img src="office room.webp" alt="Premium Home Office Furniture">
                         <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Home Office</h3>
                        <a href="office-collection.html" class="btn-slide-explore">Explore More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                <div class="category-slide">
                     <div class="category-image-wrapper">
                        <img src="placeholder-outdoor.jpg" alt="Stylish Outdoor Patio Furniture">
                         <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Outdoor</h3>
                        <a href="outdoor-collection.html" class="btn-slide-explore">Explore More <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <button class="slider-control prev" aria-label="Previous Category"><i class="fas fa-chevron-left"></i></button>
            <button class="slider-control next" aria-label="Next Category"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>
    <!-- End Category Slider Section -->

    <!-- Tip of the Month Section -->
    <section class="tip-of-the-month-section animated fadeInUp">
        <div class="tip-container">
            <div class="tip-image-background">
                <img src="https://picsum.photos/seed/tipbg2/1200/450" alt="Luxury interior design tip background">
            </div>
            <div class="tip-overlay"></div>
            <div class="tip-content">
                <span class="tip-badge">Tip of the Month</span>
                <h2 class="tip-title">Mastering Monochrome Palettes</h2>
                <p class="tip-description">Create a sophisticated and cohesive look by layering shades of a single color. Introduce varied textures and subtle metallic accents to add depth and prevent flatness.</p>
                <!-- Button removed from here -->
            </div>
        </div>
    </section>
    <!-- End Tip of the Month Section -->

    <!-- Trending This Week Section -->
    <section class="trending-section">
        <h2 class="section-title animated fadeInUp">Trending This Week</h2>
        <div class="catalogue">
            <div class="catalogue-item animated fadeInUp delay-1">
                <img src="modern sofa.jpg" alt="Trending Item 1">
                <h3>Modern Sofa</h3>
                <p>$1299</p>
            </div>
            <div class="catalogue-item animated fadeInUp delay-2">
                <img src="chair.jpg" alt="Trending Item 2">
                <h3>Elegant Chair</h3>
                <p>$499</p>
            </div>
            <div class="catalogue-item animated fadeInUp delay-3">
                <img src="wooden table.jpg" alt="Trending Item 3">
                <h3>Wooden Table</h3>
                <p>$799</p>
            </div>
        </div>
    </section>
    <!-- End Trending This Week Section -->

    <!-- Delivered & Testimonials Section -->
    <section class="delivered-testimonials-section">
        <div class="dt-container">
            <!-- Left Subsection: Delivered & Delighted -->
            <div class="delivered-delighted-subsection animated fadeInUp">
                <h2 class="subsection-title">Delivered & Delighted</h2>
                <p class="subsection-intro">See how ChristopherZ pieces transform real homes, bringing luxury and personal style to life through the eyes of our cherished clientele.</p>
                <div class="image-rotator-container" id="delivered-scroller-container">
                    <div class="image-rotator" id="delivered-scroller">
                        <img src="https://picsum.photos/seed/furniture1/300/250" alt="Delivered luxury furniture 1" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture2/300/250" alt="Delivered luxury furniture 2" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture3/300/250" alt="Delivered luxury furniture 3" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture4/300/250" alt="Delivered luxury furniture 4" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture5/300/250" alt="Delivered luxury furniture 5" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture6/300/250" alt="Delivered luxury furniture 6" class="rotator-image">
                        <img src="https://picsum.photos/seed/furniture7/300/250" alt="Delivered luxury furniture 7" class="rotator-image">
                    </div>
                </div>
                <a href="gallery.html" class="explore-btn">Explore Gallery</a>
            </div>

            <!-- Right Subsection: Customer Testimonials -->
            <div class="testimonials-subsection animated fadeInUp delay-1">
                <h2 class="subsection-title">Hear From Our Clients</h2>
                <p class="subsection-intro">Discover the experiences of those who have chosen ChristopherZ to craft their dream spaces and elevate their everyday living.</p>
                <div class="testimonial-slider-wrapper">
                    <div class="testimonial-slides">
                        <div class="testimonial">
                            <p class="testimonial-quote">"The quality and craftsmanship are unparalleled. Our living room has been completely transformed into a space of elegance and comfort. The design consultation was invaluable!"</p>
                            <p class="testimonial-author">- Sarah & Tom L., New York</p>
                            <div class="testimonial-rating">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                        </div>
                        <div class="testimonial">
                            <p class="testimonial-quote">"From selection to white-glove delivery, the entire process was seamless. The 'Artisan Stool' is a masterpiece and the perfect addition to our kitchen. Absolutely thrilled!"</p>
                            <p class="testimonial-author">- Michael B., California</p>
                             <div class="testimonial-rating">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                        </div>
                         <div class="testimonial">
                            <p class="testimonial-quote">"ChristopherZ furniture is simply divine. The attention to detail is exquisite, and their customer service made the entire experience a pleasure. Highly recommend!"</p>
                            <p class="testimonial-author">- Olivia P., London</p>
                             <div class="testimonial-rating">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                    </div>
                    <!-- Navigation buttons and pagination dots removed for automatic slider -->
                </div>
                <a href="testimonials.html" class="explore-btn">Read More Stories</a>
            </div>
        </div>
    </section>
    <!-- End Delivered & Testimonials Section -->

    <!-- Pick of the Month Section -->
    <section class="pick-section">
        <div class="pick-container">
            <div class="pick-image-wrapper animated fadeInLeft">
                <img src="pick of the month.webp" alt="Kitchen Stool - Pick of the Month">
            </div>
            <div class="pick-content-wrapper animated fadeInRight">
                <span class="pick-badge">Pick of the Month</span>
                <h2 class="pick-title">The Artisan Stool</h2>
                <p class="pick-description">
                    Experience the perfect blend of rustic charm and modern minimalism. Crafted from sustainable oak with a hand-finished seat, this stool offers both enduring style and comfort. A versatile piece that elevates any kitchen island or bar area.
                </p>
                <p class="pick-price">$129.29</p>
                <div class="pick-options">
                    <p class="options-label">Available Colors:</p>
                    <div class="color-swatches">
                        <span class="color-swatch brown active" title="Natural Oak"></span>
                        <span class="color-swatch white" title="Whitewash"></span>
                        <span class="color-swatch black" title="Ebony Stain"></span>
                    </div>
                </div>
                <a href="#" class="btn-primary pick-button">Add to Cart <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>
    <!-- End Pick of the Month Section -->

    <!-- Behind The Craft Section -->
    <section class="behind-the-craft-section">
        <div class="btc-main-title-container animated fadeInUp">
             <h2 class="section-title">Behind The Design</h2>
             <p class="section-subtitle">Explore the artistry and inspiration that define ChristopherZ.</p>
        </div>
        <div class="btc-container">
            <!-- Left Column: Production Process -->
            <div class="btc-column btc-production animated fadeInLeft delay-1">
                <h3 class="subsection-title btc-title">The Making Of ChristopherZ</h3>
                <p class="subsection-intro btc-intro">Witness the journey of our furniture, from raw sustainable materials to meticulously handcrafted masterpieces, shaped by skilled artisans.</p>
                <div class="btc-image-rotator-container" id="production-scroller-container">
                    <div class="btc-image-rotator" id="production-scroller">
                        <img src="https://picsum.photos/seed/process1/450/320" alt="Artisan at work" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/process2/450/320" alt="Wood selection" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/process3/450/320" alt="Detailed craftsmanship" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/process4/450/320" alt="Finishing touches" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/process5/450/320" alt="Quality check" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/process6/450/320" alt="Furniture assembly" class="btc-rotator-image">
                    </div>
                </div>
                <a href="craftsmanship.html" class="explore-btn btc-explore-btn">Discover Our Craftsmanship</a>
            </div>

            <!-- Right Column: Creative Inspirations -->
            <div class="btc-column btc-inspiration animated fadeInRight delay-2">
                <h3 class="subsection-title btc-title">Creative Inspirations</h3>
                <p class="subsection-intro btc-intro">Explore the mood boards, sketches, and design concepts that fuel our passion for creating unique and timeless luxury furniture.</p>
                <div class="btc-image-rotator-container" id="inspiration-scroller-container">
                    <div class="btc-image-rotator" id="inspiration-scroller">
                        <img src="https://picsum.photos/seed/inspire1/450/320" alt="Design sketch" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/inspire2/450/320" alt="Mood board" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/inspire3/450/320" alt="Material palette" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/inspire4/450/320" alt="Conceptual design" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/inspire5/450/320" alt="Textile samples" class="btc-rotator-image">
                        <img src="https://picsum.photos/seed/inspire6/450/320" alt="Architectural detail" class="btc-rotator-image">
                    </div>
                </div>
                <a href="design-gallery.html" class="explore-btn btc-explore-btn">View Design Stories</a>
            </div>
        </div>
    </section>
    <!-- End Behind The Craft Section -->

    <!-- Footer Section -->
    <footer class="site-footer animated fadeInUp">
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-column about animated fadeInUp delay-1">
                    <a href="#" class="footer-logo logo">Christopher<span>Z</span></a>
                    <p class="footer-tagline">Timeless Luxury For Modern Living. Crafting spaces that tell your story since 2023.</p>
                </div>
                <div class="footer-column links animated fadeInUp delay-2">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Collection</a></li>
                        <li><a href="#">Shop</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column social animated fadeInUp delay-3">
                    <h4>Follow Us</h4>
                    <ul class="footer-social-links">
                        <li><a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a></li>
                        <li><a href="#" aria-label="Pinterest"><i class="fab fa-tiktok"></i></a></li>
                        <li><a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a></li>
                        <li><a href="#" aria-label="Twitter"><i class="fab fa-flickr"></i></a></li>
                    </ul>
                     <h4 class="contact-heading">Contact</h4>
                     <p>123 Luxury Lane, Design City, DC 12345<br>
                        <a href="tel:+1234567890">(123) 456-7890</a><br>
                        <a href="mailto:inquiries@christopherz.com">inquiries@christopherz.com</a>
                     </p>
                </div>
                <div class="footer-column newsletter animated fadeInUp delay-4">
                    <h4>Stay Inspired</h4>
                    <p>Receive exclusive updates, new arrivals, and design tips.</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Enter your email" required>
                        <button type="submit">Subscribe</button> <!-- Removed btn-primary class -->
                    </form>
                </div>
            </div>
            <div class="footer-bottom animated fadeInUp delay-5">
                <p>© <span id="current-year"></span> ChristopherZ. All Rights Reserved.</p>
                <ul class="footer-legal-links">
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-background-accent"></div>
    </footer>
    <!-- End Footer Section -->

   <!-- Cart Sidebar -->
   <div class="cart-sidebar" id="cart-sidebar">
    <div class="cart-header">
        <h3>Your Cart</h3>
        <button class="cart-close-btn" id="cart-close-btn" aria-label="Close Cart">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="cart-body" id="cart-body">
        <div class="cart-item">
            <img src="placeholder-chair-thumb.jpg" alt="Elegant Chair" class="cart-item-image">
            <div class="cart-item-details">
                <p class="cart-item-name">Elegant Chair</p>
                <p class="cart-item-price">$499.00</p>
                <div class="quantity-controls">
                    <button class="quantity-btn minus" aria-label="Decrease quantity">-</button>
                    <input type="number" class="quantity-input" value="1" min="1" aria-label="Quantity">
                    <button class="quantity-btn plus" aria-label="Increase quantity">+</button>
                </div>
            </div>
            <button class="cart-item-remove" aria-label="Remove item"><i class="fas fa-trash-alt"></i></button>
        </div>
        <div class="cart-item">
             <img src="placeholder-sofa-thumb.jpg" alt="Modern Sofa" class="cart-item-image">
             <div class="cart-item-details">
                 <p class="cart-item-name">Modern Sofa</p>
                 <p class="cart-item-price">$1299.00</p>
                 <div class="quantity-controls">
                     <button class="quantity-btn minus" aria-label="Decrease quantity">-</button>
                     <input type="number" class="quantity-input" value="1" min="1" aria-label="Quantity">
                     <button class="quantity-btn plus" aria-label="Increase quantity">+</button>
                 </div>
             </div>
             <button class="cart-item-remove" aria-label="Remove item"><i class="fas fa-trash-alt"></i></button>
        </div>
         <p class="cart-empty-message" style="display: none;">Your cart is currently empty.</p>
    </div>
    <div class="cart-footer">
        <div class="cart-subtotal">
            <span>Subtotal:</span>
            <span id="cart-subtotal-amount">$1798.00</span>
        </div>
        <button class="btn-primary checkout-btn">Proceed to Checkout</button>
        <button class="btn-secondary continue-shopping-btn" id="continue-shopping-btn">Continue Shopping</button>
    </div>
</div>
<!-- End Cart Sidebar -->

<!-- Optional: Overlay for clicking outside cart -->
<div class="cart-overlay" id="cart-overlay"></div>

    <!-- Main Site Functionality Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {

            // --- Mobile Navigation Toggle ---
            const menuButton = document.querySelector('.menu-btn');
            const mainNav = document.getElementById('main-nav');
            const body = document.body;

            if (menuButton && mainNav) {
                menuButton.addEventListener('click', () => {
                    mainNav.classList.toggle('mobile-nav-active');
                    body.classList.toggle('mobile-nav-active'); 
                    const icon = menuButton.querySelector('i');
                    if (mainNav.classList.contains('mobile-nav-active')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
            }

            // --- Header Scroll Effect ---
            const header = document.querySelector('header');
            if (header) {
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        header.classList.add('scrolled');
                    } else {
                        header.classList.remove('scrolled');
                    }
                });
            }

            // --- Hero Image Parallax ---
            const heroImage = document.querySelector('.hero-image');
            if (heroImage && getComputedStyle(heroImage).display !== 'none') { 
                window.addEventListener('scroll', () => {
                    const scrollPosition = window.pageYOffset;
                    if (getComputedStyle(heroImage).display !== 'none') {
                        heroImage.style.transform = `translateY(${scrollPosition * 0.15}px)`;
                    }
                });
            }

            // --- Helper for Mobile View Detection ---
            function isMobileView() {
                return window.innerWidth <= 768; // Matches your common mobile breakpoint
            }

            // --- Category Slider Logic (Conditional PC/Mobile) ---
            const categorySlider = document.querySelector('.category-slider');
            const categorySlides = Array.from(document.querySelectorAll('.category-slide'));
            const categoryNextButton = document.querySelector('.category-slider-container .slider-control.next');
            const categoryPrevButton = document.querySelector('.category-slider-container .slider-control.prev');

            function initializeCategorySlider() {
                if (!categorySlider || categorySlides.length === 0) return;

                if (!isMobileView()) {
                    // PC View Logic (Manual Slider)
                    let currentIndex = 0;
                    let slideWidth = categorySlides[0].getBoundingClientRect().width;
                    let containerWidth = categorySlider.offsetWidth;
                    let slidesToScroll = 1; 
                    let slidesToShow = Math.max(1, Math.round(containerWidth / slideWidth));

                    function updateSlider() {
                        containerWidth = categorySlider.offsetWidth; 
                        slideWidth = categorySlides[0].getBoundingClientRect().width; 
                        slidesToShow = Math.max(1, Math.floor(containerWidth / slideWidth)); 
                        
                        const maxIndex = Math.max(0, categorySlides.length - slidesToShow);
                        currentIndex = Math.min(currentIndex, maxIndex);
                        
                        let newTransform = -currentIndex * slideWidth;

                        categorySlider.style.transform = `translateX(${newTransform}px)`;
                        categoryPrevButton.disabled = currentIndex === 0;
                        categoryNextButton.disabled = currentIndex >= maxIndex;
                    }

                    if (categoryNextButton) {
                        categoryNextButton.addEventListener('click', () => {
                            const maxIndex = Math.max(0, categorySlides.length - slidesToShow);
                            if (currentIndex < maxIndex) {
                                currentIndex = Math.min(currentIndex + slidesToScroll, maxIndex);
                                updateSlider();
                            }
                        });
                    }

                    if (categoryPrevButton) {
                        categoryPrevButton.addEventListener('click', () => {
                            if (currentIndex > 0) {
                                currentIndex = Math.max(currentIndex - slidesToScroll, 0);
                                updateSlider();
                            }
                        });
                    }

                    let resizeTimeout;
                    window.addEventListener('resize', () => {
                        clearTimeout(resizeTimeout);
                        if (!isMobileView()) { // Only update if still in PC view
                            resizeTimeout = setTimeout(() => {
                                updateSlider(); 
                            }, 250);
                        } else {
                            // If it becomes mobile, stop PC logic
                            categorySlider.style.transform = 'translateX(0)'; // Reset transform
                            if (categoryPrevButton) categoryPrevButton.style.display = 'none';
                            if (categoryNextButton) categoryNextButton.style.display = 'none';
                        }
                    });
                    updateSlider(); 
                } else {
                    // Mobile View: Defer to initMobileAutoScrollSlider, hide buttons
                    if (categoryPrevButton) categoryPrevButton.style.display = 'none';
                    if (categoryNextButton) categoryNextButton.style.display = 'none';
                    initMobileAutoScrollSlider('.category-slider', 2); // Initialized below with other mobile-specific sliders
                }
            }
            if (categorySlider && categorySlides.length > 0) {
                initializeCategorySlider();
            }

            // --- Intersection Observer for Animations ---
            const animatedItemsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        // animatedItemsObserver.unobserve(entry.target); // Optional: unobserve after first animation
                    }
                });
            }, { threshold: 0.1 }); 

            document.querySelectorAll('.animated').forEach(item => {
                animatedItemsObserver.observe(item);
            });


            // --- Footer Current Year ---
            const currentYearSpan = document.getElementById('current-year');
            if (currentYearSpan) {
                currentYearSpan.textContent = new Date().getFullYear();
            }

            // --- Testimonial Slider Logic (Always Automatic) ---
            function initializeTestimonialSlider() {
                const sliderWrapper = document.querySelector('.testimonial-slider-wrapper');
                const testimonialSlides = document.querySelector('.testimonial-slides');
                const testimonials = Array.from(document.querySelectorAll('.testimonial-slides .testimonial'));

                if (!sliderWrapper || !testimonialSlides || testimonials.length === 0) {
                    console.warn('Testimonial slider elements not found or no testimonials.');
                    return;
                }

                if (testimonials.length <= 1) { // No need to slide if only one or no testimonials
                    return;
                }

                let currentIndex = 0;
                let slideInterval;
                const slideDuration = 5000; // 5 seconds for auto-play

                function showSlide(index) {
                    if (index < 0) {
                        currentIndex = testimonials.length - 1; // Loop to end
                    } else if (index >= testimonials.length) {
                        currentIndex = 0; // Loop to beginning
                    } else {
                        currentIndex = index;
                    }

                    const offset = -currentIndex * 100; // Each slide is 100% wide
                    testimonialSlides.style.transform = `translateX(${offset}%)`;
                }

                function nextSlide() {
                    showSlide(currentIndex + 1);
                }

                function startAutoSlide() {
                    stopAutoSlide(); // Clear any existing interval
                    slideInterval = setInterval(nextSlide, slideDuration);
                }

                function stopAutoSlide() {
                    clearInterval(slideInterval);
                }

                // Initial setup
                showSlide(currentIndex); // Show the first slide
                startAutoSlide(); // Start auto-sliding

                // Pause auto-slide on hover
                sliderWrapper.addEventListener('mouseenter', stopAutoSlide);
                sliderWrapper.addEventListener('mouseleave', startAutoSlide);

                // Handle window resize (optional, but good for responsiveness)
                window.addEventListener('resize', () => {
                    // Re-call showSlide to adjust position if needed, without animation
                    testimonialSlides.style.transition = 'none'; // Temporarily disable transition
                    showSlide(currentIndex);
                    setTimeout(() => { // Re-enable transition after re-positioning
                        testimonialSlides.style.transition = 'transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1)';
                    }, 50); // Small delay to allow reflow
                    startAutoSlide(); // Restart auto-slide
                });
            }

            initializeTestimonialSlider(); 

            // --- Generic Horizontal Image Scroller Script (for Delivered & Behind The Craft) ---
            // These are continuous animations, not snap-to-slide.
            function initializeHorizontalScroller(containerSelector, rotatorSelector, imageClass, scrollSpeedMultiplier = 1) {
                const rotatorContainer = document.querySelector(containerSelector);
                if (!rotatorContainer || isMobileView()) { // Don't run on mobile for these specific sections
                    return;
                }

                const imageRotator = rotatorContainer.querySelector(rotatorSelector);
                if (!imageRotator) {
                    return;
                }

                const originalImages = Array.from(imageRotator.querySelectorAll('.' + imageClass));

                if (originalImages.length === 0) {
                    return;
                }

                // Clone images to create infinite loop effect
                originalImages.forEach(img => {
                    const clone = img.cloneNode(true);
                    imageRotator.appendChild(clone);
                });
                
                // Add more clones if there aren't enough images to fill the space for seamless loop
                if (originalImages.length < 5 && originalImages.length > 0) { 
                    for(let i=0; i< (5 - originalImages.length) * 2; i++) { // Add enough to cover at least twice
                        const clone = originalImages[i % originalImages.length].cloneNode(true);
                        imageRotator.appendChild(clone);
                    }
                }

                let currentX = 0;
                const scrollSpeed = 0.5 * scrollSpeedMultiplier;
                let singleCycleWidth = 0;
                let animationFrameId;

                function calculateCycleWidth() {
                    singleCycleWidth = 0;
                    if (originalImages.length > 0) {
                        originalImages.forEach(img => {
                            const style = window.getComputedStyle(img);
                            singleCycleWidth += img.offsetWidth + parseFloat(style.marginRight || 0) + parseFloat(style.marginLeft || 0);
                        });
                    }
                }
                
                // Use setTimeout to ensure images have rendered and their widths are correct
                setTimeout(calculateCycleWidth, 100);

                function animateScroller() {
                    currentX -= scrollSpeed;
                    imageRotator.style.transform = `translateX(${currentX}px)`;

                    // Reset position when a full cycle has passed
                    if (singleCycleWidth > 0 && Math.abs(currentX) >= singleCycleWidth) {
                        const overflow = Math.abs(currentX) - singleCycleWidth;
                        currentX = -(overflow % singleCycleWidth); // Ensure smooth reset for fractional speeds
                        imageRotator.style.transform = `translateX(${currentX}px)`;
                    }
                    animationFrameId = requestAnimationFrame(animateScroller);
                }

                function startAnimation() {
                    if (singleCycleWidth > 0 && imageRotator.scrollWidth > rotatorContainer.offsetWidth && !animationFrameId) {
                         animateScroller();
                    } else if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                }

                let imagesLoaded = 0;
                const totalImages = originalImages.length;
                if(totalImages === 0) {
                    startAnimation(); 
                    return;
                }

                originalImages.forEach(img => {
                    if (img.complete && img.naturalWidth > 0) {
                        imagesLoaded++;
                    } else {
                        img.onload = () => {
                            imagesLoaded++;
                            if (imagesLoaded === totalImages) {
                                calculateCycleWidth();
                                startAnimation();
                            }
                        };
                        img.onerror = () => { // Handle potential broken images
                            imagesLoaded++;
                            if (imagesLoaded === totalImages) {
                                calculateCycleWidth();
                                startAnimation();
                            }
                        }
                    }
                });
                if (imagesLoaded === totalImages && totalImages > 0) { 
                    calculateCycleWidth();
                    startAnimation();
                }

                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                        animationFrameId = null;
                    }
                    resizeTimeout = setTimeout(() => {
                        if (!isMobileView()) { // Re-init only if still on PC view
                            calculateCycleWidth();
                            currentX = 0; // Reset position on resize
                            imageRotator.style.transform = `translateX(${currentX}px)`;
                            startAnimation();
                        } else { // If switched to mobile, stop animation
                            imageRotator.style.transform = 'translateX(0)'; // Reset transform
                        }
                    }, 250);
                });
            }

            initializeHorizontalScroller('#delivered-scroller-container', '#delivered-scroller', 'rotator-image', 0.8);
            initializeHorizontalScroller('#production-scroller-container', '#production-scroller', 'btc-rotator-image', 1);
            initializeHorizontalScroller('#inspiration-scroller-container', '#inspiration-scroller', 'btc-rotator-image', 1.1);

            // --- Mobile-specific Auto-scroll Slider (using scrollLeft) ---
            function initMobileAutoScrollSlider(containerSelector, scrollSpeed = 2) {
                const container = document.querySelector(containerSelector);
                if (!container || !isMobileView()) {
                    return;
                }

                let scrollInterval;
                const scrollDuration = 50; // Milliseconds per scroll step

                // Clone content for seamless looping (if applicable and desired, e.g., for items)
                // This approach generally works better if you ensure your scroll-snap items are consistent.
                // For simplicity, we'll just implement the scroll logic, assuming items are already set up with snap.
                const items = Array.from(container.children);
                if (items.length > 0) {
                    items.slice(0, Math.min(items.length, 3)).forEach(item => { // Clone first few items for smoother loop start
                        container.appendChild(item.cloneNode(true));
                    });
                }


                function autoScroll() {
                    const currentScroll = container.scrollLeft;
                    const maxScroll = container.scrollWidth - container.clientWidth;

                    if (currentScroll + scrollSpeed >= maxScroll) {
                        // If nearing end, "jump" to the beginning part that contains the cloned content
                        container.scrollLeft = 0; 
                    } else {
                        container.scrollLeft += scrollSpeed;
                    }
                }

                function startAutoScroll() {
                    stopAutoScroll(); // Clear any existing interval
                    if (container.scrollWidth > container.clientWidth) { // Only scroll if content overflows
                        scrollInterval = setInterval(autoScroll, scrollDuration);
                    }
                }

                function stopAutoScroll() {
                    clearInterval(scrollInterval);
                }

                // Pause on hover
                container.addEventListener('mouseenter', stopAutoScroll);
                container.addEventListener('mouseleave', startAutoScroll);

                // Initial start
                startAutoScroll();

                // Re-evaluate on resize
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    stopAutoScroll(); // Stop current animation
                    resizeTimeout = setTimeout(() => {
                        if (isMobileView()) {
                            startAutoScroll();
                        } else {
                            // If switched to PC, reset scroll and ensure no auto-scroll
                            container.scrollLeft = 0;
                        }
                    }, 300); // Debounce resize
                });
            }

            // Initialize mobile auto-sliders if in mobile view
            if (isMobileView()) {
                initMobileAutoScrollSlider('.category-slider', 2); // Category Slider on Mobile
                initMobileAutoScrollSlider('.catalogue', 2); // Trending This Week on Mobile
            }
            window.addEventListener('resize', () => {
                // Re-initialize based on current view when resize finishes
                if (isMobileView()) {
                    initMobileAutoScrollSlider('.category-slider', 2);
                    initMobileAutoScrollSlider('.catalogue', 2);
                }
            });

        });
    </script>

    <!-- Cart Sidebar Toggle Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const cartIconBtn = document.querySelector('.cart-icon-link');
            const cartSidebar = document.getElementById('cart-sidebar');
            const cartCloseBtn = document.getElementById('cart-close-btn');
            const cartOverlay = document.getElementById('cart-overlay');
            const continueShoppingBtn = document.getElementById('continue-shopping-btn');
            const bodyForCart = document.body;

            function openCart() {
                if (cartSidebar) cartSidebar.classList.add('active');
                if (cartOverlay) cartOverlay.classList.add('active');
                bodyForCart.style.overflow = 'hidden'; 
            }

            function closeCart() {
                if (cartSidebar) cartSidebar.classList.remove('active');
                if (cartOverlay) cartOverlay.classList.remove('active');
                bodyForCart.style.overflow = ''; 
            }

            if (cartIconBtn) {
                cartIconBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openCart();
                });
            }
            if (cartCloseBtn) cartCloseBtn.addEventListener('click', closeCart);
            if (cartOverlay) cartOverlay.addEventListener('click', closeCart);
            if (continueShoppingBtn) continueShoppingBtn.addEventListener('click', closeCart);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && cartSidebar && cartSidebar.classList.contains('active')) {
                    closeCart();
                }
            });
        });
    </script>

</body>
</html>